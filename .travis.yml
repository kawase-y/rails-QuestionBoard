language: ruby
rvm:
- 2.3.1
services:
- postgresql
bundler_args: "--without development --deployment"
cache: bundler
before_script:
- bundle exec rake db:create RAILS_ENV=test
- bundle exec rake db:migrate RAILS_ENV=test
script:
- bundle exec rake test
deploy:
  provider: heroku
  api_key:
    secure: PjGGlgETx4HlHVXdPTlJuhXSIQohyfucvkgsLETCRsTb5kWO4gUeHZNQLl/rtgkWU0uhlgfMGxZ494Glf2oDKhb7eC8NBcG0Km+bZwCkc51cbqtt04uzkydZgnOwVrWw+fMrWQ7y3rb/PB3Nc1aDJOTZBKkNrcgHUJVmcPk+f9/4Mss/KibrQRrVvA8lyYEkgOXImaqOU5cPHWb2nRXqoXz9dGWA+qs3LJd1ySmdPahRYYJs4GSQhzgGcLZMTpIj4DQ+Wxp2C3mPyPqYHX/EWfZEqe8PD6Zt4uFsnQcbUwreyUMVYJlVOx4KJ1ITk4ti0UUMfznhUd3DY2GMOKFiM9pVREwMFE1de5jlRp1i+1JYt0ZRiaTFSd31fUbRj0MR4hLzAL8INP+V5zvgL+sV4njz1vMT2XucD8XnZVJ9RUFmvKFtqy29NafmcFHFjcxPl/RkMrTG7iicc3kGAPKPLbS1kdphAZPWNF8oI4xySGFWF8LAhPUMcGX/IWkJjuinp8KqnXT7bBgezhgl1s5lcEn8stoQ+T1gj08oLPlYngjQ556nPSPulud+3ZRled9f80PNEGT4dbvseKqp3AMAdYA/sJ9V1LLcVRn1NzqppjBiMqJWjTUnu5DnlGx+CjXkaMyFusgtAzLJSweLjIybGaoyLOOvsU9upst1KcCrSN4=
  run: "rake db:migrate"
  app: questionboard
  on:
    repo: kawase-y/rails-QuestionBoard
